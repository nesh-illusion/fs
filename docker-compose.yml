services:
  lucius-orchestrator:
    build:
      context: .
      dockerfile: services/lucius-orchestrator/Dockerfile
    ports:
      - "8000:8000"
    environment:
      LUCIUS_STORAGE_BACKEND: "memory"

  vector-ingestion:
    build:
      context: .
      dockerfile: services/vector-ingestion/Dockerfile

  distributed-ocr:
    build:
      context: .
      dockerfile: services/distributed-ocr/Dockerfile

  semantic-intelligence:
    build:
      context: .
      dockerfile: services/semantic-intelligence/Dockerfile

  test_runner:
    build:
      context: .
      dockerfile: services/test_runner/Dockerfile
    environment:
      PYTHONDONTWRITEBYTECODE: "1"
      TMPDIR: "/tmp"
    depends_on:
      - lucius-orchestrator
      - distributed-ocr
      - vector-ingestion
      - semantic-intelligence
